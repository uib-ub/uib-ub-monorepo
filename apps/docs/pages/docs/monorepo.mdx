# Monorepo

The `uib-ub-monorepo` is a monorepo for the University of Bergen's fullstack team.

## Branching strategy

```mermaid
---
Monorepo merge strategy
---
%%{init: { 'logLevel': 'debug', 'theme': 'base' } }%%
    gitGraph
       commit
       branch feature
       commit
       commit
			 commit
			 checkout main
       branch hotfix
       commit
			 checkout main
       merge hotfix
       checkout feature
			 commit
			 checkout main
       merge feature
```

## Dependency graph

This graph was generated by Turborepo 25.04.23.

```mermaid
graph TD
	CXTX("___ROOT___#build") --> MKUC("___ROOT___")
	XPYH("api#build") --> TLTN("eslint-config-custom#build")
	XPYH("api#build") --> LGSI("utils#build")
	CGWW("chc-exh-nt-web#build") --> TLTN("eslint-config-custom#build")
	CGWW("chc-exh-nt-web#build") --> AHYC("tailwind-config#build")
	CGWW("chc-exh-nt-web#build") --> FPMW("tailwind-ui#build")
	CGWW("chc-exh-nt-web#build") --> YQKY("tsconfig#build")
	STSI("chc-web#build") --> TLTN("eslint-config-custom#build")
	STSI("chc-web#build") --> YQKY("tsconfig#build")
	MDNO("design-system#build") --> CXTX("___ROOT___#build")
	FNHG("docs#build") --> TLTN("eslint-config-custom#build")
	FNHG("docs#build") --> FPMW("tailwind-ui#build")
	FNHG("docs#build") --> YQKY("tsconfig#build")
	TLTN("eslint-config-custom#build") --> CXTX("___ROOT___#build")
	BFCM("link-shortener#build") --> TLTN("eslint-config-custom#build")
	BFCM("link-shortener#build") --> YQKY("tsconfig#build")
	IGME("sps-termportal-web#build") --> TLTN("eslint-config-custom#build")
	AHYC("tailwind-config#build") --> CXTX("___ROOT___#build")
	FPMW("tailwind-ui#build") --> TLTN("eslint-config-custom#build")
	FPMW("tailwind-ui#build") --> AHYC("tailwind-config#build")
	FPMW("tailwind-ui#build") --> YQKY("tsconfig#build")
	YQKY("tsconfig#build") --> CXTX("___ROOT___#build")
	LGSI("utils#build") --> TLTN("eslint-config-custom#build")
	LGSI("utils#build") --> YQKY("tsconfig#build")
```

## Setup

```sh
git clone git@github.com:uib-ub/uib-ub-monorepo.git
cd uib-ub-monorepo
```

### Build

To build all apps and packages, run the following command:

```sh
npm run build
```

### Develop

To develop all apps and packages, run the following command:

```sh
npm run dev
```

## Best practice
### Installing packages etc.
Every app's `package.json` is mirrored in the monorepo's shared `package-lock.json` See ([Turborepo docs](https://turbo.build/repo/docs/handbook/package-installation)). This means:
- Changes to `package.json` should be executed with the respective `npm` command and the monorepo's `package-lock.json` has to be updated and commited as well.
- Before creating a new branch (that effects `package-lock.json`) one has to pull from origin. Merging conflicting changes in the shared `package-lock.json` is hard.

## Useful Links

Learn more about the power of Turborepo:

- [Pipelines](https://turborepo.org/docs/core-concepts/pipelines)
- [Caching](https://turborepo.org/docs/core-concepts/caching)
- [Remote Caching](https://turborepo.org/docs/core-concepts/remote-caching)
- [Scoped Tasks](https://turborepo.org/docs/core-concepts/scopes)
- [Configuration Options](https://turborepo.org/docs/reference/configuration)
- [CLI Usage](https://turborepo.org/docs/reference/command-line-reference)